{
  "id": "route-5xx-v1",
  "name": "Route 5xx Analysis",
  "version": "1.0.0",
  "triageTarget": "route-5xx",
  "triggers": [ { "type": "static_target", "target": "route-5xx", "confidence": 1.0 } ],
  "blocks": [],
  "composition": { "infrastructure": [], "workload": [] },
  "steps": [
    { "tool": "oc_read_describe", "params": { "resourceType": "endpoints", "namespace": "<ns>", "name": "<service>" }, "rationale": "Service endpoints health" },
    { "tool": "oc_read_describe", "params": { "resourceType": "route", "namespace": "<ns>", "name": "<route>" }, "rationale": "Route spec and TLS" },
    { "tool": "oc_read_describe", "params": { "resourceType": "pod", "namespace": "<ns>", "name": "<backendPod>" }, "rationale": "Probe configuration" }
  ],
  "evidenceContract": {
    "version": "v1.0.0",
    "required": ["endpoints", "routeSpec"],
    "selectors": {
      "endpoints": [
        { "type": "yq", "path": ".subsets[].addresses[]?.ip" },
        { "type": "jsonpath", "path": "{.subsets[*].addresses[*].ip}" },
        { "type": "eventsRegex", "path": "Endpoints|Addresses|NotReadyAddresses" },
        { "type": "eventsRegex", "path": "(?i)Addresses: \\s*<none>|NotReadyAddresses: \\s*<none>|subsets: \\s*\\[\\s*\\]|No subsets" }
      ],
      "routeSpec": [
        { "type": "yq", "path": ".spec" },
        { "type": "eventsRegex", "path": "Route|TLS|termination|edge|passthrough|reencrypt|backend" },
        { "type": "eventsRegex", "path": "(?i)Readiness probe failed|readiness probe.*(failed|timeout|http.*(404|5\\d\\d))|ContainersNotReady" }
      ]
    },
    "completenessThreshold": 0.7
  },
  "boundaries": { "maxSteps": 3, "timeoutMs": 20000 }
}
